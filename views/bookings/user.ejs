<% layout('layouts/boilerplate') %>

<div class="container py-4">
  <h1 class="mb-4">My bookings</h1>

  <% if (!bookings || bookings.length === 0) { %>
    <p class="text-muted">You haven't made any bookings yet.</p>
  <% } else { %>
    <div class="list-group">
      <% bookings.forEach(b => { %>
        <div class="list-group-item d-flex justify-content-between align-items-start">
          <div>
            <strong><%= b.listing ? b.listing.title : 'Listing' %></strong>
            <div class="small text-muted">From <%= new Date(b.startDate).toLocaleDateString() %> to <%= new Date(b.endDate).toLocaleDateString() %></div>
          </div>
          <div>
            <a href="/listings/<%= b.listing ? b.listing._id : '#' %>" class="btn btn-sm btn-outline-secondary">Open</a>
          </div>
        </div>
      <% }) %>
    </div>
  <% } %>
</div>
